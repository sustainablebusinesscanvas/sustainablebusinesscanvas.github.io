/*! project-name v0.0.1 | (c) 2020 YOUR NAME | MIT License | http://link-to-your-git-repo.com */
function findVideos(){let t=document.querySelectorAll(".video");for(let e=0;e<t.length;e++)setupVideo(t[e])}function setupVideo(t){let e=t.querySelector(".video__link"),n=t.querySelector(".video__media"),o=t.querySelector(".video__button"),i=parseMediaURL(n);t.addEventListener("click",n=>{let a=createIframe(i);n.target.closest(".video").classList.add("media__video--hide"),e.remove(),o.remove(),t.appendChild(a)}),e.removeAttribute("href"),t.classList.add("video--enabled")}function parseMediaURL(t){return t.src.match(/https:\/\/i\.ytimg\.com\/vi\/([a-zA-Z0-9_-]+)\/maxresdefault\.jpg/i)[1]}function createIframe(t){let e=document.createElement("iframe");return e.setAttribute("allowfullscreen",""),e.setAttribute("allow","autoplay"),e.setAttribute("src",generateURL(t)),e.classList.add("video__media"),e}function generateURL(t){return"https://www.youtube.com/embed/"+t+"?rel=0&showinfo=0&autoplay=1"}!(function(){if(window.matchMedia("(max-width: 767px)").matches)return;const add=function(t,e){return t+e},getWDs=function(){return{h:window.innerHeight||document.documentElement.clientHeight,w:window.innerWidth||document.documentElement.clientWidth}},inFocus=function(t){let e=t.getBoundingClientRect(),n=getWDs().h/2,o=getWDs().w/2,i=!1,a=e.top<=n&&e.top>=0||e.bottom<=getWDs().h&&e.bottom>=n||e.top<=0&&e.bottom>=n;return(e.left<o&&e.left>=0||e.right<getWDs().w&&e.right>o)&&a&&(i=!0),i},scrollWindow=function(_target,_label,_speed){let scene=eval(_target.dataset.scene),timeline=eval(_target.dataset.timeline),timelineDuration=timeline.duration(),tlLabel="timeline.labels."+_label,labelTime=eval(tlLabel),nMTime=0;nMTime=timelineDuration!=labelTime&&null!=labelTime?labelTime/getRatio(scene.duration(),timeline.duration()):timeline.duration()/getRatio(scene.duration(),timeline.duration());let scrollLoc=scene.scrollOffset()+nMTime;gsap.to(window,_speed,{scrollTo:{y:scrollLoc}})},getRatio=function(t,e){return t>e?e/t:t/e};let sectionCount=12,shiftWidth="-="+100/sectionCount+"%";const controller=new ScrollMagic.Controller,horizontalSlide=gsap.timeline().addLabel("scene_00").to("#sections-container",.5,{z:-150,rotation:.01}).to("#sections-container",{x:shiftWidth}).to("#sections-container",.5,{z:0,rotation:.01}).addLabel("scene_10").to("#sections-container",.5,{z:-150,rotation:.01}).to("#sections-container",{x:shiftWidth}).to("#sections-container",.5,{z:0,rotation:.01}).addLabel("scene_11").to("#sections-container",.5,{z:-150,rotation:.01}).to("#sections-container",{x:shiftWidth}).to("#sections-container",.5,{z:0,rotation:.01}).addLabel("scene_12").to("#sections-container",.5,{z:-150,rotation:.01}).to("#sections-container",{x:shiftWidth}).to("#sections-container",.5,{z:0,rotation:.01}).addLabel("scene_13").to("#sections-container",.5,{z:-150,rotation:.01}).to("#sections-container",{x:shiftWidth}).to("#sections-container",.5,{z:0,rotation:.01}).addLabel("scene_14").to("#sections-container",.5,{z:-150,rotation:.01}).to("#sections-container",{x:shiftWidth}).to("#sections-container",.5,{z:0,rotation:.01}).addLabel("scene_15").to("#sections-container",.5,{z:-150,rotation:.01}).to("#sections-container",{x:shiftWidth}).to("#sections-container",.5,{z:0,rotation:.01}).addLabel("scene_16").to("#sections-container",.5,{z:-150,rotation:.01}).to("#sections-container",{x:shiftWidth}).to("#sections-container",.5,{z:0,rotation:.01}).addLabel("scene_17").to("#sections-container",.5,{z:-150,rotation:.01}).to("#sections-container",{x:shiftWidth}).to("#sections-container",.5,{z:0,rotation:.01}).addLabel("scene_18").to("#sections-container",.5,{z:-150,rotation:.01}).to("#sections-container",{x:shiftWidth}).to("#sections-container",.5,{z:0,rotation:.01}).addLabel("scene_19").to("#sections-container",.5,{z:-150,rotation:.01}).to("#sections-container",{x:shiftWidth}).to("#sections-container",.5,{z:0,rotation:.01}),sideScroll=new ScrollMagic.Scene({triggerElement:"#pinContainer",triggerHook:"onLeave",duration:"1200%"}).setPin("#pinContainer").addIndicators().setTween(horizontalSlide).addTo(controller),onNavClick=function(t){t.preventDefault();let e=t.currentTarget;scrollWindow(e,e.dataset.label,1.5)};let anchors=document.querySelectorAll(".menu__link");function resetNavHit(t){anchors.forEach((function(t){t.classList.remove("menu__link--active")})),t.classList.add("menu__link--active")}anchors.forEach((function(t){t.addEventListener("click",onNavClick)}));let sections=document.querySelectorAll(".slider__item");const setSelectedSection=function(){sections.forEach((function(t,e){inFocus(t)&&resetNavHit(anchors[e])}))};document.addEventListener("scroll",(function(){setSelectedSection()})),setSelectedSection()})(),(function(){var t=document.getElementById("main-nav-toggler");if(t){t.addEventListener("click",(function(e){e.preventDefault(),t.classList.toggle("burger--close"),document.getElementById("main-nav").classList.toggle("main-nav--open")}))}var e=new RegExp("main-nav__link");document.addEventListener("focus",(function(t){e.test(t.target.className)&&t.target.parents(".main-nav__item").forEach((function(t){t.classList.add("main-nav__item--show-child")}))}),!0),document.addEventListener("blur",(function(t){e.test(t.target.className)&&document.querySelectorAll(".main-nav__item--show-child").forEach((function(t){t.classList.remove("main-nav__item--show-child")}))}),!0),Element.prototype.parents=function(t){for(var e=[],n=this,o=void 0!==t;null!==(n=n.parentElement);)n.nodeType===Node.ELEMENT_NODE&&(o&&!n.matches(t)||e.push(n));return e}})(),(function(){var t=document.getElementById("video-modal"),e=document.querySelector(".top__video"),n=t.querySelector(".close");const o=function(t){const e=t.querySelector("iframe"),n=t.querySelector("video");e&&(e.setAttribute("allow",""),e.src=e.src.replace("&autoplay=1","")),n&&n.pause()};e.addEventListener("click",(function(e){e.preventDefault(),t.classList.add("modal__show")})),n.addEventListener("click",(function(e){e.preventDefault(),t.classList.remove("modal__show"),o(t)})),window.addEventListener("click",(function(e){e.target===t&&(t.classList.remove("modal__show"),o(t))}))})(),findVideos();